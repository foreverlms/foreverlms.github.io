<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	
	<title>用Python实现自己下载音乐的统计</title>
	<meta name="description" content="今天看Python实例，学习了如何对文件进行操作，突然想把自己网易云音乐下载到本地的歌曲名单写到一个txt中，看看具体情况。当然，我现在肯定无法做到直接去网易云音乐上爬取，就做个最简单的吧，嘻嘻^-^。">
	<meta name="keywords" content="python, 寒鸥惊起一双双" />
	<link rel="canonical" href="https://blog.bobliao.xyz/code/2017/03/05/music-analyze-python.html">
	<link rel="alternate" type="application/rss+xml" title="寒鸥惊起一双双" href="https://blog.bobliao.xyz/feed.xml" />
   	<link rel="stylesheet" type="text/css" href="/css/index.css">
</head>

<body>
<div class="body-wrapper">
<div class="nav-header">
<a href="/">寒鸥惊起一双双</a> | <a href="https://github.com/foreverlms" target="_blank">Github</a> |<a href="/about"> 关于我 </a></div>
<div class="main-body">
<header>
<h2>用Python实现自己下载音乐的统计</h2>
<p><i>2017-03-05</i></p>
</header>
<article>
<p>今天看Python实例，学习了如何对文件进行操作，突然想把自己网易云音乐下载到本地的歌曲名单写到一个txt中，看看具体情况。当然，我现在肯定无法做到直接去网易云音乐上爬取，就做个最简单的吧，嘻嘻^-^。</p>

<h2 id="代码实现">代码实现</h2>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">os</span>
<span class="k">def</span> <span class="nf">split_songs_name</span><span class="p">(</span><span class="n">s</span><span class="p">)</span> <span class="p">:</span>
    <span class="s">'''
    拆分歌曲名，去掉歌手和一些其他信息，只保留歌曲名
    :param s: 歌曲文件名
    :return: 歌曲名
    '''</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">s</span><span class="p">,</span><span class="nb">str</span><span class="p">)</span> <span class="p">:</span>
        <span class="k">if</span> <span class="n">s</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s">'-'</span><span class="p">)</span> <span class="p">:</span>
            <span class="k">return</span> <span class="n">s</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">'-'</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">s</span>
<span class="k">def</span> <span class="nf">get_all_mp3</span><span class="p">(</span><span class="n">path</span><span class="p">)</span> <span class="p">:</span>
    <span class="s">'''
    获取指定目录下所有的.mp3文件，存入一个list中
    :param path: 指定路径
    :return: 歌曲名list
    '''</span>
    <span class="n">songs_list</span><span class="o">=</span><span class="p">[]</span>
    <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="n">path</span><span class="p">)</span> <span class="p">:</span>
        <span class="n">file_path</span><span class="o">=</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">path</span><span class="p">,</span><span class="n">f</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="n">file_path</span><span class="p">)</span> <span class="ow">and</span>    <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="n">file_path</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span><span class="o">==</span><span class="s">'.mp3'</span><span class="p">:</span>
            <span class="n">songs_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">split_songs_name</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">file_path</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">'.'</span><span class="p">)[</span><span class="mi">0</span><span class="p">]))</span>
        <span class="k">elif</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isdir</span><span class="p">(</span><span class="n">file_path</span><span class="p">)</span> <span class="p">:</span>
            <span class="n">get_all_mp3</span><span class="p">(</span><span class="n">file_path</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">songs_list</span>
<span class="n">songs_list</span><span class="o">=</span><span class="n">get_all_mp3</span><span class="p">(</span><span class="s">r'D:\网易云音乐'</span><span class="p">)</span>
<span class="c1">#指定路径
</span><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s">r'D:\song.txt'</span><span class="p">,</span><span class="s">'w'</span><span class="p">,</span><span class="n">encoding</span><span class="o">=</span><span class="s">'utf-8'</span><span class="p">)</span> <span class="k">as</span>  <span class="n">f</span><span class="p">:</span>
    <span class="s">'''
    写入指定的txt文件中
    '''</span>
    <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">songs_list</span><span class="p">:</span>
        <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">s</span><span class="o">+</span><span class="s">'</span><span class="se">\n</span><span class="s">'</span><span class="p">)</span>

</code></pre></div></div>

<p>这些就是今天的小收获了，python注重简洁高效，我这里还有很多功能无法实现，如：没有考虑歌曲名存在多个’-‘划分的情况；无法查询歌曲所属专辑、发行时间等。希望自己以后能多多改善！
 哈哈，前辈们说学编程得多动手，今天动了一下小手，再说一下接下来的目标：用Python爬取豆瓣电影并输出Excel格式的文件，加油，fighting！</p>

</article>
<div id="info-bottom">
<hr>
<p>标签: <block class="tag"><a href="/archive/#python">python</a></block></p>
<p><b>留言</b>请用 <a href="https://github.com/foreverlms/foreverlms.github.io/issues"> Github Issues </a></p>
<p><b>聊天</b>请在 <a href="https://gitter.im/foreverlms/community" target="_blank">gitter.im/foreverlms</a> </p>
</div>

</div>
<div class="info-bottom"><div class="info-bottom-text">
License <a href="http://creativecommons.org/licenses/by-nc-sa/3.0/">(CC) BY-NC-SA</a> | Subscribe <a href="/feed.xml">RSS</a> | Email <a href="mailto:codechaser@163.com">codechaser囧163.com</a> | 博客模板 <a href="https://fzheng.me/" target="_blank">无求备斋笔记</a>
</div></div> 
</div>
</body>
<script src="https://use.typekit.net/hvv6ahj.js"></script>
<script>try{Typekit.load({ async: true });}catch(e){}</script>
</html>